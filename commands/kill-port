#!/bin/bash
# Kill process running on a port
# Usage: kk kill-port <port>
# Example: kk kill-port 3000

DESCRIPTION="Kill process running on a port"
source "$HOME/.kk/lib/common"
kk_trap_errors

if [ -z "$1" ]; then
  kk_die "Usage: kk kill-port <port>"
fi

PORT="$1"

# Find PID using the port
PID=$(lsof -ti :$PORT 2>/dev/null)

if [ -z "$PID" ]; then
  kk_warn "nothing running on port $CYAN$PORT$NC"
  exit 0
fi

kk_info "killing PID $YELLOW$PID$NC on port $CYAN$PORT$NC"
kill -9 $PID
kk_info "done"
